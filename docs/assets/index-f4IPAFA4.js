var D=(r,t,s)=>{if(!t.has(r))throw TypeError("Cannot "+s)};var d=(r,t,s)=>{if(t.has(r))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(r):t.set(r,s)};var c=(r,t,s)=>(D(r,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const h of n.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();const p=["å˜¿ï¼æ—…è¡Œè€…å•Šï¼Œå¥½åƒä»¥å‰åœ¨é€™é™„è¿‘æ²’çœ‹éŽä½ ","ä½ æ‡‰è©²æ˜¯ä¾†è‡ªä¸åŒçš„åœ°æ–¹å§ï¼Ÿä½ é•·å¾—è·Ÿæˆ‘å€‘æœ‰äº›ä¸æ¨£","ä¸€è‡‰å£½æ˜Ÿæ¨£çš„","æˆ‘æ˜¯ä¸€ä»‹ç”¨åƒç´ æ§‹æˆçš„è¾²å¤«ï¼Œæ­¡è¿Žä½ ä¾†åˆ°æˆ‘çš„è¾²å ´","æ—¢ç„¶æˆ‘å€‘æœƒç›¸é‡ä¸€å®šä¹Ÿæ˜¯æˆ‘çš„å‰µé€ è€…çš„å®‰æŽ’ï¼Œæˆ‘æœ‰ä¸€äº‹ç›¸æ±‚","æ˜¯é€™æ¨£çš„...","çœ‹åˆ°å¾Œé¢é€™ç‰‡è‰åŽŸäº†å—Žï¼Ÿ","æˆ‘çš„åƒç´ é´¨é´¨å€‘å› ç‚ºç¶²è·¯å¤ªæ…¢ï¼Œæ‰€ä»¥é€šé€šéƒ½å¾žç©€å€‰è·‘å‡ºä¾†äº†","ä½ çš„èƒ½åŠ›æ‡‰è©²æœ‰è¾¦æ³•å¹«æˆ‘æŠŠä»–å€‘é€šé€šæŠ“å›žç©€å€‰è£¡å§","ç•¶ç„¶ï¼Œæˆ‘ä¹Ÿä¸æœƒè®“ä½ åšç™½å·¥","ç©€å€‰ä»£è¡¨è‘—ä¸åŒçš„é¡˜æœ›","åˆ†åˆ¥ç‚ºè²¡é‹ã€å¥åº·ã€æ„Ÿæƒ…ã€äº‹æ¥­","åªè¦æŠŠåƒç´ é´¨é´¨å€‘ä¸Ÿåˆ°ä½ æƒ³è¦çš„ç©€å€‰","ç©€å€‰è£¡çš„é´¨é´¨å°±æœƒåœ¨æœªä¾†ä¸€å¹´ç”¨wifiå…‰æ³¢å¹«åŠ©ä½ ","å¦‚ä½•ï¼Ÿé€™ä»½äº¤æ˜“ä¸éŒ¯å§","å¦å¤–ä¹Ÿæœƒè«‹æˆ‘çš„å‰µé€ è€…çµ¦å£½æ˜Ÿç›¸æ‡‰çš„å›žé¥‹","ä½ é¡˜æ„å¹«å¹«æˆ‘å—Žï¼Ÿ","æŠ±æ­‰æˆ‘å¿˜è¨˜å¸¶åˆ°æ‹’çµ•çš„æŒ‰éˆ•äº†","é‚£éº¼æˆ‘å€‘å°±é–‹å§‹å§ï¼"],z=["å“‡å–”ï¼çœ‹ä¾†åƒç´ é´¨é´¨å€‘éƒ½å›žåˆ°ä»–å€‘ç©€å€‰è£¡äº†","çœŸçš„éžå¸¸æ„Ÿè¬","é€™æ¨£æˆ‘å°±å¯ä»¥å®‰ç©©çš„åº¦éŽé€™ä¸€å¹´äº†","å¸Œæœ›å¦³ä¹Ÿæ˜¯å‘¢","å¥½äº†ï¼Œçœ‹ä¾†å¦³æˆ‘ç›¸è™•çš„æ™‚é–“åˆ°äº†","æˆ‘å€‘ä¾†çœ‹çœ‹å¦³è¨±äº†å“ªäº›é¡˜æœ›å§"];class O{constructor(t,s,{width:i=120,height:e=90}={}){this.center=t,this.category=s,this.count=0,this.size={width:i,height:e}}putDuck(){this.count+=1}draw(t){const s=this.center.x-this.size.width/2,i=this.center.y-this.size.height/2,e=this.size.width/6,n=this.size.height/2,h=e/2;t.beginPath(),t.fillStyle="rgb(180, 21, 19)",t.rect(s+h,i+n*1,this.size.width-h*2,n),t.fill(),t.beginPath(),t.fillStyle="rgb(180, 21, 19)",t.moveTo(s+e*3,i),t.lineTo(s+e,i+n/2),t.lineTo(s,i+n),t.lineTo(s+this.size.width,i+n),t.lineTo(s+e*5,i+n/2),t.lineTo(s+e*3,i),t.closePath(),t.fill(),t.beginPath(),t.strokeStyle="white",t.lineWidth=5,t.moveTo(s+e*3,i),t.lineTo(s+e,i+n/2),t.lineTo(s,i+n),t.stroke(),t.moveTo(s+e*3,i),t.lineTo(s+e*5,i+n/2),t.lineTo(s+this.size.width,i+n),t.stroke(),t.beginPath(),t.fillStyle="white",t.rect(s+e,i+n*.75,e,e),t.rect(s+e*4,i+n*.75,e,e),t.fill(),t.beginPath(),t.fillStyle="black",t.rect(s+e*2,i+n*1.45,e*2,n*.55),t.fill(),t.beginPath(),t.font="24px 'Stick'",t.fillStyle="white",t.fillText(`${this.count} ${this.category}`,this.center.x,i+this.size.height+n/4)}}var v,T;class H{constructor(t,s){d(this,v);this.id=s,this.center=t,this.size=60,this.speed=1,this.directionX=0,this.directionY=0,this.isCatch=!1,this.count=Math.min(3,Math.random()*5)*60,c(this,v,T).call(this)}draw(t){if(this.isCatch){this.drawCatchingDuck(t);return}this.drawNormalDuck(t)}drawCatchingDuck(t){const s=this.center.x-this.size/2,i=this.center.y-this.size/2,e=this.size/8;t.beginPath(),t.fillStyle="white",t.rect(s+e*3,i,e*2,e*3),t.rect(s+e*2,i+e*3,e*4,e),t.rect(s+e,i+e*4,e*6,e),t.rect(s,i+e*5,this.size,e*2),t.rect(s+e,i+e*7,e*6,e),t.fill(),t.beginPath(),t.fillStyle="black",t.rect(s+e*3.25,i+e*1,e/2,e/2),t.rect(s+e*4.25,i+e*1,e/2,e/2),t.fill(),t.beginPath(),t.fillStyle="orange",t.rect(s+e*2.5,i+e*2,e,e/4),t.fill(),t.beginPath(),t.strokeStyle="orange",t.lineWidth=4,t.moveTo(s+e*3.5,i+this.size),t.lineTo(s+e*3.5,i+this.size+e*1.5),t.moveTo(s+e*4.5,i+this.size),t.lineTo(s+e*4.5,i+this.size+e*1.5),t.stroke()}drawHead(t){const s=this.center.x-this.size/2,i=this.center.y-this.size/2,e=this.size/4;t.fillStyle="white";const n=this.directionX>0?s+e*3:s;t.rect(n,i,e,e*2),t.fill(),t.fillStyle="orange";const h={x:e/2,y:e/4};t.beginPath();const o=this.directionX>0?s+e*4:n-h.x;t.rect(o,i+e,h.x,h.y),t.fill(),t.fillStyle="black";const a=e/4;t.beginPath(),t.rect(n+e/2,i+e/2,a,a),t.fill()}drawBody(t){const s=this.center.x-this.size/2,i=this.size/4;t.beginPath(),t.fillStyle="white",t.rect(s,this.center.y,this.size,i*2),t.fill(),t.beginPath(),t.strokeStyle="gray",t.lineWidth=3;const e=this.directionX>0?s+i*3:s+i,n=this.directionX>0?e-i*2:e+i*2;t.moveTo(e,this.center.y+i/2),t.lineTo(e,this.center.y+i*1.5),t.lineTo(n,this.center.y+i*1.5),t.stroke()}drawFeet(t){const s=this.size/16,i=this.center.y+this.size/2-s,e=this.directionX>0?this.center.x-s:this.center.x+s;t.beginPath(),t.strokeStyle="orange",t.lineWidth=4,t.moveTo(e,i),t.lineTo(e,i+s*4);let n=this.directionX>0?e+s:e-s;t.lineTo(n,i+s*4),t.moveTo(e-s*2,i+s),t.lineTo(e-s*2,i+s*4),n=this.directionX>0?e-s:e-s*3,t.lineTo(n,i+s*4),t.stroke()}drawNormalDuck(t){this.drawBody(t),this.drawHead(t),this.drawFeet(t)}pick(){this.isCatch=!0}release(){this.isCatch=!1,c(this,v,T).call(this)}workAround(t,s){if(this.isCatch)return;const{x:i,y:e}=this.center;(i+this.size/2>=t||i-this.size/2<=0)&&(this.directionX=0-this.directionX),(e+this.size/2>=s||e-this.size/2<=0)&&(this.directionY=0-this.directionY),this.center.move(i+this.directionX*this.speed,e+this.directionY*this.speed),this.count-=1,this.count<0&&(c(this,v,T).call(this),this.count=Math.min(5,Math.random()*15)*60)}escape(){this.directionX=0-this.directionX,this.directionY=0-this.directionY,this.speed=2}}v=new WeakSet,T=function(){const t=Math.random()*Math.PI*2-Math.PI;this.directionX=Math.cos(t),this.directionY=Math.sin(t);const s=(Math.floor(Math.random()*2)+1)/2;this.speed=s};class Y{constructor(t,s){this.x=t,this.y=s}move(t,s){this.x=t,this.y=s}}const E=(r,t)=>{const s=Math.abs(r.x-t.x),i=Math.abs(r.y-t.y);return Math.hypot(s,i)};var u,b,f,k,m,S,X,C,P,I;class N{constructor(t){d(this,u);d(this,f);d(this,m);d(this,X);d(this,P);this.canvas=t,this.ctx=t.getContext("2d"),this.wishes=["â¤ï¸â¤ï¸","ðŸ’°ðŸ’°","ðŸ’ªðŸ’ª","ðŸ’¼ðŸ’¼"],this.ducks=[],this.huts=[],this.isStart=!1,this.isFinish=!1,this.drag=!1,this.selected=null}start(){this.isStart=!0,this.isFinish=!1,this.generateField(),c(this,X,C).call(this)}finish(){this.isFinish=!0,c(this,P,I).call(this)}generateField(){const t=Array.from(Array(10)).map((h,o)=>new H(new Y(this.canvas.width/2,this.canvas.height/2),o));this.ducks=t;const s=80,i=50,e=h=>{let o=Math.floor(Math.random()*(this.canvas.width-s)),a=Math.floor(Math.random()*(this.canvas.height-i));o<s&&(o=s),a<i&&(a=i);const l=new Y(o,a);let g=!0;const L=Math.hypot(s,i);return h.forEach(y=>{E(y,l)<L&&(g=!1)}),this.ducks.forEach(y=>{E(y.center,l)<L&&(g=!1)}),g?l:e(h)},n=[];for(let h=0;h<this.wishes.length;h+=1){const o=e(n.map(a=>a.center));n.push(new O(o,this.wishes[h],{width:s,height:i}))}this.huts=n}checkIsCloseToHut(t){const s=this.huts.length>0?Math.hypot(this.huts[0].size.width,this.huts[0].size.height)/1.5:80;return this.huts.find(e=>E(e.center,t.center)<s)}draw(){!this.isStart||this.isFinish||(this.isStart&&this.ducks.length<1&&(this.finish(),console.log(this.isStart,this.isFinish)),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),!(this.ducks.length<1)&&(this.huts.forEach(t=>{t.draw(this.ctx)}),this.ducks.forEach(t=>{this.checkIsCloseToHut(t)&&t.escape(),t.workAround(this.canvas.width,this.canvas.height),t.draw(this.ctx)})))}makeResult(t){const s={"â¤ï¸â¤ï¸":{content:"æ„Ÿæƒ…â¤ï¸",color:"pink"},"ðŸ’°ðŸ’°":{content:"è²¡é‹ðŸ’°",color:"gold"},"ðŸ’ªðŸ’ª":{content:"å¥åº·ðŸ’ª",color:"green"},"ðŸ’¼ðŸ’¼":{content:"äº‹æ¥­ðŸ’¼",color:"teal"}},i=this.huts.map(o=>o.count).reduce((o,a)=>o+a),e=this.huts.map(o=>({title:s[o.category].content,color:s[o.category].color,score:o.count})),n=[],h=`
      <div style="width: 100%; height: 15px; display: flex; flex-wrap: no-wrap">
        <div style="width: ${e[0].score/i*100}%; background: ${e[0].color}">${e[0].score}</div>
        <div style="width: ${e[1].score/i*100}%; background: ${e[1].color}">${e[1].score}</div>
        <div style="width: ${e[2].score/i*100}%; background: ${e[2].color}">${e[0].score}</div>
        <div style="width: ${e[3].score/i*100}%; background: ${e[3].color}">${e[3].score}</div>
      </div>
    `;n.push(h),n.forEach(o=>{t.push(o)})}}u=new WeakSet,b=function(t){if(!this.isStart||this.isFinish)return;this.drag=!0;const s=t.type==="touchstart"?t.touches[0].clientX:t.offsetX,i=t.type==="touchstart"?t.touches[0].clientY:t.offsetY,e=new Y(s,i);let n=Number.MAX_SAFE_INTEGER,h=null;const o=this.ducks[0].size;if(this.ducks.forEach(a=>{const l=E(a.center,e);l<n&&l<o&&(n=l,h=a)}),h){this.selected=h,this.selected.pick();return}this.selected=null},f=new WeakSet,k=function(t){if(!this.selected||!this.drag)return;const s=t.type==="touchmove"?t.touches[0].clientX:t.offsetX,i=t.type==="touchmove"?t.touches[0].clientY:t.offsetY;this.drag&&this.selected.center.move(s,i)},m=new WeakSet,S=function(){if(!this.isStart||this.isFinish)return;this.selected&&this.selected.release();const t=this.selected?this.checkIsCloseToHut(this.selected):null;if(t){const s=this.ducks.findIndex(i=>i.id===this.selected.id);t.putDuck(),this.ducks.splice(s,1)}this.drag=!1,this.selected=null},X=new WeakSet,C=function(){this.canvas.addEventListener("mousedown",c(this,u,b).bind(this)),this.canvas.addEventListener("touchstart",c(this,u,b).bind(this)),this.canvas.addEventListener("touchmove",c(this,f,k).bind(this)),this.canvas.addEventListener("mousemove",c(this,f,k).bind(this)),this.canvas.addEventListener("mouseup",c(this,m,S).bind(this)),this.canvas.addEventListener("touchend",c(this,m,S).bind(this))},P=new WeakSet,I=function(){this.canvas.removeEventListener("mousedown",c(this,u,b).bind(this)),this.canvas.removeEventListener("touchstart",c(this,u,b).bind(this)),this.canvas.removeEventListener("touchmove",c(this,f,k).bind(this)),this.canvas.removeEventListener("mousemove",c(this,f,k).bind(this)),this.canvas.removeEventListener("mouseup",c(this,m,S).bind(this)),this.canvas.removeEventListener("touchend",c(this,m,S).bind(this))};const q=()=>{const r=document.querySelector("body"),t=document.querySelector(".contact");document.querySelector(".generate-duck");const s=document.querySelector(".show-story"),i=document.querySelector(".next"),e=document.querySelector(".prev"),n=($,A)=>{t.innerHTML=$[A]};let h=0;const o=()=>{if(h-=1,n(p,h),h<1){e.classList.add("hide");return}e.classList.remove("hide")},a=()=>{if(h+1>=p.length){i.classList.add("hide"),e.classList.add("hide"),s.classList.add("hide"),i.removeEventListener("click",a),e.removeEventListener("click",o),w.start(),F();return}h+=1,n(p,h),h>0&&e.classList.remove("hide")};n(p,h),i.addEventListener("click",a),e.addEventListener("click",o);let l=0;const g=()=>{l+1>=z.length&&console.log("END"),l+=1,n(z,l),l>0&&e.classList.remove("hide")},L=()=>{if(l-=1,n(p,l),l<1){e.classList.add("hide");return}e.classList.remove("hide")},y=()=>{i.classList.remove("hide"),i.addEventListener("click",g),e.classList.remove("hide"),e.addEventListener("click",L),s.classList.remove("hide"),w.makeResult(z),n(z,l)},M=document.getElementById("CANVAS");M.width=r.offsetWidth,M.height=r.offsetHeight;const w=new N(M),F=()=>{if(w.isStart&&w.isFinish){y();return}w.draw(),requestAnimationFrame(F)}};window.onload=q;
